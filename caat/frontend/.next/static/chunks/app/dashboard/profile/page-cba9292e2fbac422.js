(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{2226:(e,t,a)=>{Promise.resolve().then(a.bind(a,1341))},1341:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(5155),l=a(2115);function o(){let[e,t]=(0,l.useState)({name:"",age:"",email:"",school:"",major:""}),[a,o]=(0,l.useState)(!0),s="https://caat-projectapp.onrender.com";(0,l.useEffect)(()=>{!async function(){let e=localStorage.getItem("token");if(e)try{let a=await fetch("".concat(s,"/api/user/profile"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(a.ok){let{user:e}=await a.json();t({name:(null==e?void 0:e.name)||"",age:(null==e?void 0:e.age)||"",email:(null==e?void 0:e.email)||"",school:(null==e?void 0:e.school)||"",major:(null==e?void 0:e.major)||""})}else console.error("Failed to fetch profile data")}catch(e){console.error("Error fetching profile data:",e)}finally{o(!1)}}()},[]);let n=async(a,r)=>{let l=localStorage.getItem("token");if(!l)return;let o={...e,[a]:r};t(o);try{(await fetch("".concat(s,"/api/user/profile"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(o)})).ok||console.error("Failed to update profile")}catch(e){console.error("Error updating profile:",e)}};return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"My Profile"}),a?(0,r.jsx)("p",{children:"Loading..."}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("table",{className:"table-auto w-full mb-6 border border-gray-300",children:[(0,r.jsx)("thead",{className:"bg-gray-200",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Field"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Value"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:Object.entries(e).map(e=>{let[t,a]=e;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-2 border",children:t.charAt(0).toUpperCase()+t.slice(1)}),(0,r.jsx)("td",{className:"px-4 py-2 border",children:a}),(0,r.jsx)("td",{className:"px-4 py-2 border",children:(0,r.jsx)("button",{onClick:()=>{let e=prompt("Edit ".concat(t),a);null!==e&&n(t,e)},className:"text-blue-600 hover:underline",children:"Edit"})})]},t)})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(2226)),_N_E=e.O()}]);